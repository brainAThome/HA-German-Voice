# ================================================================================
# HA-GERMAN-VOICE - Deutsche Licht-Sprachbefehle
# ================================================================================
# TRUE STATE OF THE ART - Home Assistant 2024+ Syntax
# ✅ Entity Slots mit type: entity + domain filtering
# ✅ Area Slots mit type: area
# ✅ Responses direkt in Sentences
# ================================================================================

language: de

# ============================================================================
# EXPANSION RULES
# ============================================================================
expansion_rules:
  article: "[der|die|das|den|dem]"
  polite: "[bitte|mal|doch|eben]"
  room_prep: "(in|im|am|vom|beim)"

# ============================================================================
# LISTEN
# ============================================================================
lists:
  brightness:
    values:
      - in: "(0|null|aus)"
        out: 0
      - in: "(10|zehn)"
        out: 10
      - in: "(20|zwanzig)"
        out: 20
      - in: "(25|fünfundzwanzig|viertel)"
        out: 25
      - in: "(30|dreißig|dreissig)"
        out: 30
      - in: "(40|vierzig)"
        out: 40
      - in: "(50|fünfzig|fuenfzig|halb|halbe)"
        out: 50
      - in: "(60|sechzig)"
        out: 60
      - in: "(70|siebzig)"
        out: 70
      - in: "(75|fünfundsiebzig|dreiviertel)"
        out: 75
      - in: "(80|achtzig)"
        out: 80
      - in: "(90|neunzig)"
        out: 90
      - in: "(100|hundert|voll|volle|maximum)"
        out: 100

  color:
    values:
      - in: "(rot|rotes|rotem)"
        out: "red"
      - in: "(grün|gruen|grünes|grünem)"
        out: "green"
      - in: "(blau|blaues|blauem)"
        out: "blue"
      - in: "(gelb|gelbes|gelbem)"
        out: "yellow"
      - in: "(orange|oranges|orangem)"
        out: "orange"
      - in: "(lila|violett|violet|lila)"
        out: "purple"
      - in: "(rosa|pink)"
        out: "pink"
      - in: "(weiß|weiss|weißes|weissem)"
        out: "white"
      - in: "(warm|warmweiß|warmweiss)"
        out: "warmwhite"
      - in: "(kalt|kaltweiß|kaltweiss)"
        out: "coldwhite"
      - in: "(cyan|türkis|tuerkis)"
        out: "cyan"

  color_temp:
    values:
      - in: "(kalt|kühles|kuehles|kaltes|kühl|kuehl|tageslicht)"
        out: 153
      - in: "(neutral|normales|normal)"
        out: 300
      - in: "(warm|warmes|gemütlich|gemuetlich|gemütliches)"
        out: 400
      - in: "(sehr warm|kerzen|kerzenlicht)"
        out: 500

# ============================================================================
# RESPONSES FÜR BUILT-IN INTENTS (Key-basiert, nicht inline!)
# Bei Built-in Intents (HassTurnOn, HassTurnOff, HassToggle, HassLightSet)
# ist response: ein KEY der auf responses: verweist, KEIN Jinja2-Template!
# ============================================================================
responses:
  intents:
    HassTurnOn:
      light_entity: "{{ ['OK', 'Alles klar', 'Erledigt', 'Klar', 'Jo', 'Geht klar'] | random }}, {{ slots.name }} ist an."
      light_area: "{{ ['OK', 'Alles klar', 'Erledigt', 'Klar', 'Jo', 'Geht klar'] | random }}, Licht in {{ slots.area }} ist an."
      light_all: "{{ ['OK', 'Alles klar', 'Erledigt'] | random }}, alle Lichter sind an."
    HassTurnOff:
      light_off_entity: "{{ ['OK', 'Alles klar', 'Erledigt', 'Klar', 'Jo', 'Geht klar'] | random }}, {{ slots.name }} ist aus."
      light_off_area: "{{ ['OK', 'Alles klar', 'Erledigt', 'Klar', 'Jo', 'Geht klar'] | random }}, Licht in {{ slots.area }} ist aus."
      light_off_all: "{{ ['OK', 'Alles klar', 'Erledigt'] | random }}, alle Lichter sind aus."
    HassToggle:
      light_toggle: "{{ ['OK', 'Alles klar', 'Erledigt', 'Klar'] | random }}, {{ slots.name }} umgeschaltet."
    HassLightSet:
      brightness_entity: "{{ ['OK', 'Alles klar', 'Erledigt', 'Klar'] | random }}, {{ slots.name }} auf {{ slots.brightness }}%."
      brightness_area: "{{ ['OK', 'Alles klar', 'Erledigt', 'Klar'] | random }}, Licht in {{ slots.area }} auf {{ slots.brightness }}%."
      adjust_entity: "{{ ['OK', 'Alles klar', 'Erledigt', 'Klar'] | random }}, {{ slots.name }} angepasst."
      color_entity: "{{ ['OK', 'Alles klar', 'Erledigt', 'Klar'] | random }}, {{ slots.name }} leuchtet jetzt {{ slots.color }}."
      color_area: "{{ ['OK', 'Alles klar', 'Erledigt', 'Klar'] | random }}, Licht in {{ slots.area }} leuchtet jetzt {{ slots.color }}."
      colortemp_entity: "{{ ['OK', 'Alles klar', 'Erledigt', 'Klar'] | random }}, Farbtemperatur von {{ slots.name }} angepasst."
      colortemp_area: "{{ ['OK', 'Alles klar', 'Erledigt', 'Klar'] | random }}, Farbtemperatur in {{ slots.area }} angepasst."

# ============================================================================
# INTENTS MIT ENTITY/AREA SLOTS + RESPONSES
# ============================================================================
intents:
  # --------------------------------------------------------------------------
  # LICHT AN
  # --------------------------------------------------------------------------
  HassTurnOn:
    data:
      # === Mit Entity-Name ===
      - sentences:
          - "(mach|schalte|stell|dreh|schalt) <polite> <article> {name} (an|ein)"
          - "<article> {name} (anschalten|einschalten|anmachen)"
          - "(licht|lampe|beleuchtung) (an|ein) {name}"
          - "{name} (licht|lampe) (an|ein)"
          - "(könntest|kannst|würdest) du <polite> <article> {name} (anmachen|einschalten)"
        slots:
          name:
            type: entity
            domain: light
        response: light_entity
      
      # === Mit Area ===
      - sentences:
          - "(mach|schalte) <polite> [das] licht (an|ein) <room_prep> {area}"
          - "licht (an|ein) <room_prep> {area}"
          - "<room_prep> {area} licht (an|ein)"
          - "(hell|licht) <room_prep> {area}"
          - "{area} (beleuchten|erhellen)"
        slots:
          area:
            type: area
        response: light_area

      # === Alle Lichter ===
      - sentences:
          - "(mach|schalte) <polite> (alle|alles|sämtliche) (lichter|lampen|beleuchtung) (an|ein)"
          - "(alle|alles|sämtliche) (lichter|lampen) (an|einschalten)"
          - "lichter (an|ein)"
          - "licht überall (an|ein)"
          - "überall hell"
        response: light_all

  # --------------------------------------------------------------------------
  # LICHT AUS
  # --------------------------------------------------------------------------
  HassTurnOff:
    data:
      # === Mit Entity-Name ===
      - sentences:
          - "(mach|schalte|stell|dreh|schalt) <polite> <article> {name} (aus|ab)"
          - "<article> {name} (ausschalten|abschalten|ausmachen)"
          - "(licht|lampe|beleuchtung) (aus|ab) {name}"
          - "{name} (licht|lampe) (aus|ab)"
          - "(könntest|kannst|würdest) du <polite> <article> {name} (ausmachen|ausschalten)"
        slots:
          name:
            type: entity
            domain: light
        response: light_off_entity
      
      # === Mit Area ===
      - sentences:
          - "(mach|schalte) <polite> [das] licht (aus|ab) <room_prep> {area}"
          - "licht (aus|ab) <room_prep> {area}"
          - "<room_prep> {area} licht (aus|ab)"
          - "{area} (abdunkeln|dunkel)"
        slots:
          area:
            type: area
        response: light_off_area

      # === Alle Lichter ===
      - sentences:
          - "(mach|schalte) <polite> (alle|alles|sämtliche) (lichter|lampen|beleuchtung) (aus|ab)"
          - "(alle|alles|sämtliche) (lichter|lampen) (aus|ausschalten)"
          - "lichter (aus|ab)"
          - "licht überall (aus|ab)"
          - "alles dunkel"
        response: light_off_all

  # --------------------------------------------------------------------------
  # LICHT TOGGLE
  # --------------------------------------------------------------------------
  HassToggle:
    data:
      - sentences:
          - "(toggle|umschalten|wechsel|wechsle) <article> {name}"
          - "<article> {name} (toggle|umschalten)"
        slots:
          name:
            type: entity
            domain: light
        response: light_toggle

  # --------------------------------------------------------------------------
  # HELLIGKEIT SETZEN
  # --------------------------------------------------------------------------
  HassLightSet:
    data:
      # === Mit Entity-Name und Brightness ===
      - sentences:
          - "(setz|stell) <polite> <article> {name} [helligkeit] auf {brightness} [prozent]"
          - "<article> {name} auf {brightness} [prozent] [setzen|stellen|dimmen]"
          - "(dimm|dimme) <polite> <article> {name} auf {brightness} [prozent]"
          - "(mach|stell) <polite> <article> {name} [auf] {brightness} [prozent] [hell|dunkel]"
          - "<article> {name} helligkeit [auf] {brightness} [prozent]"
          - "{name} [auf] {brightness} [prozent]"
        slots:
          name:
            type: entity
            domain: light
        response: brightness_entity
      
      # === Mit Area und Brightness ===
      - sentences:
          - "(setz|stell) <polite> [die] helligkeit <room_prep> {area} auf {brightness} [prozent]"
          - "<room_prep> {area} [licht] [auf] {brightness} [prozent]"
          - "(dimm|dimme) <polite> <room_prep> {area} auf {brightness} [prozent]"
        slots:
          area:
            type: area
        response: brightness_area
      
      # === Heller/Dunkler mit Entity - Alle Satzstellungen ===
      - sentences:
          # Standard: "das Bürolicht heller"
          - "<article> {name} (heller|dunkler)"
          - "(mach|mache|stell|stelle) <polite> <article> {name} (heller|dunkler)"
          # Mit "machen": "Bürolicht heller machen"
          - "[das|die] {name} (heller|dunkler) [machen]"
          - "(mach|mache) [das|die] {name} (heller|dunkler)"
          # Natürliche Ordnung: "Mach heller das Bürolicht"
          - "(mach|mache) (heller|dunkler) [das|die] {name}"
          # Imperativ: "Dimme das Bürolicht"
          - "(dimm|dimme) <polite> [das|die] {name}"
          - "(erhöhe|erhöh) <polite> [das|die] {name}"
          # Mit Licht explizit
          - "{name} licht (heller|dunkler) [machen]"
          - "(mach|mache) {name} licht (heller|dunkler)"
        slots:
          name:
            type: entity
            domain: light
        response: adjust_entity
      
      # === Heller/Dunkler mit Area - ENTFERNT - siehe LightBrighterArea/LightDarkerArea ===

      # === FARBE setzen (Entity) ===
      - sentences:
          - "(mach|stell|setz) <polite> <article> {name} [auf] {color}"
          - "<article> {name} [in|auf] {color} [setzen|stellen|ändern]"
          - "{color}[es] licht {name}"
          - "(änder|wechsel|wechsle) [die] farbe [von|der|des|am] {name} [auf|zu|nach] {color}"
          - "<article> {name} farbe [auf] {color}"
        slots:
          name:
            type: entity
            domain: light
        response: color_entity

      # === FARBE setzen (Area) ===
      - sentences:
          - "{color}[es] licht <room_prep> {area}"
          - "(änder|wechsel) [die] farbe <room_prep> {area} [auf|zu] {color}"
        slots:
          area:
            type: area
        response: color_area

      # === FARBTEMPERATUR setzen (Entity) ===
      - sentences:
          - "(mach|stell) <polite> <article> {name} [auf] {color_temp}[es] [licht]"
          - "<article> {name} [auf] {color_temp}"
        slots:
          name:
            type: entity
            domain: light
        response: colortemp_entity

      # === FARBTEMPERATUR setzen (Area) ===
      - sentences:
          - "{color_temp}[es] licht <room_prep> {area}"
          - "<room_prep> {area} [licht] [auf] {color_temp}"
        slots:
          area:
            type: area
        response: colortemp_area

  # --------------------------------------------------------------------------
  # LICHT HELLER (Custom Intent für Area)
  # --------------------------------------------------------------------------
  LightBrighterArea:
    data:
      - sentences:
          # Standard: "Mach es im Büro heller"
          - "(mach|mache|stell|stelle) [es] <room_prep> {area} heller"
          - "(mach|mache|stell|stelle) [das] [licht] <room_prep> {area} heller"
          # Area am Ende: "Mach es heller im Büro"
          - "(mach|mache|stell|stelle) [es] heller <room_prep> {area}"
          - "(mach|mache|stell|stelle) [das] [licht] heller <room_prep> {area}"
          # Ohne Verb: "Heller im Büro"
          - "heller <room_prep> {area}"
          - "mehr licht <room_prep> {area}"
          # Mit Area am Anfang: "Büro heller machen"
          - "{area} [licht] heller [machen]"
          - "[das] {area} [licht] heller [machen]"
          # Area-Licht Varianten: "Bürolicht heller", "Büro Licht heller"
          - "{area}licht heller [machen]"
          - "{area} licht heller [machen]"
          # Mit Artikel: "Mach das Büro Licht heller"
          - "(mach|mache) [das] {area} [licht] heller"
          # Natürliche Sätze: "Ich finde es im Büro zu dunkel"
          - "[ich] [finde] [es] [ist] <room_prep> {area} [zu] dunkel"
          - "[ich finde] [das] licht <room_prep> {area} [ist] [zu] dunkel"
          - "[es ist] <room_prep> {area} [zu] dunkel[, mach es heller]"
          # Mehr Licht: "Mehr Licht im Büro bitte"
          - "mehr licht <room_prep> {area} [bitte]"
          - "<room_prep> {area} mehr licht [bitte]"
          # Erhöhe: "Erhöhe das Licht im Büro"
          - "(erhöhe|erhöh) [das] [licht] <room_prep> {area}"
          - "(erhöhe|erhöh) [die] helligkeit <room_prep> {area}"
        slots:
          area:
            type: area

  # --------------------------------------------------------------------------
  # LICHT DUNKLER (Custom Intent für Area)
  # --------------------------------------------------------------------------
  LightDarkerArea:
    data:
      - sentences:
          # Standard: "Mach es im Büro dunkler"
          - "(mach|mache|stell|stelle) [es] <room_prep> {area} dunkler"
          - "(mach|mache|stell|stelle) [das] [licht] <room_prep> {area} dunkler"
          # Area am Ende: "Mach es dunkler im Büro"
          - "(mach|mache|stell|stelle) [es] dunkler <room_prep> {area}"
          - "(mach|mache|stell|stelle) [das] [licht] dunkler <room_prep> {area}"
          # Ohne Verb: "Dunkler im Büro"
          - "dunkler <room_prep> {area}"
          - "weniger licht <room_prep> {area}"
          # Mit Area am Anfang: "Büro dunkler machen"
          - "{area} [licht] dunkler [machen]"
          - "[das] {area} [licht] dunkler [machen]"
          # Area-Licht Varianten: "Bürolicht dunkler"
          - "{area}licht dunkler [machen]"
          - "{area} licht dunkler [machen]"
          # Mit Artikel: "Mach das Büro Licht dunkler"
          - "(mach|mache) [das] {area} [licht] dunkler"
          # Natürliche Sätze: "Ich finde es im Büro zu hell"
          - "[ich] [finde] [es] [ist] <room_prep> {area} [zu] hell"
          - "[ich finde] [das] licht <room_prep> {area} [ist] [zu] hell"
          - "[es ist] <room_prep> {area} [zu] hell[, mach es dunkler]"
          # Weniger Licht: "Weniger Licht im Büro"
          - "weniger licht <room_prep> {area} [bitte]"
          - "<room_prep> {area} weniger licht [bitte]"
          # Dimme: "Dimme das Licht im Büro"
          - "(dimme|dimm) [das] [licht] <room_prep> {area}"
          - "(reduziere|reduzier|verringere|verringer) [das] [licht] <room_prep> {area}"
          - "(reduziere|reduzier|verringere|verringer) [die] helligkeit <room_prep> {area}"
        slots:
          area:
            type: area

  # --------------------------------------------------------------------------
  # VOLLE HELLIGKEIT (Custom Intent)
  # --------------------------------------------------------------------------
  LightMaxArea:
    data:
      - sentences:
          # Standard: "Volle Helligkeit im Büro"
          - "(volle|voller|maximale|maximaler) helligkeit <room_prep> {area}"
          - "(volles|maximales) licht <room_prep> {area}"
          # Am Ende: "Im Büro volle Helligkeit"
          - "<room_prep> {area} (volle|voller|maximale|maximaler) helligkeit"
          - "<room_prep> {area} (volles|maximales) licht"
          # Mit mach/stell: "Mach das Licht im Büro auf voll"
          - "(mach|mache|stell|stelle) [das] [licht] <room_prep> {area} auf (voll|maximum|100|100 prozent)"
          - "(mach|mache|stell|stelle) [das] [licht] <room_prep> {area} (voll|ganz) (hell|an)"
          # Area am Ende: "Stelle das Licht auf voll im Büro"
          - "(mach|mache|stell|stelle) [das] [licht] auf (voll|maximum) <room_prep> {area}"
          # Licht auf voll: "Licht im Büro auf voll"
          - "licht <room_prep> {area} auf (voll|maximum|100|100 prozent)"
          # Area am Anfang: "Büro volle Helligkeit"
          - "{area} [licht] [auf] (volle|voller|maximale) helligkeit"
          - "{area} [licht] [auf] (voll|maximum|100|100 prozent)"
          - "{area}licht [auf] (voll|maximum|100|100 prozent)"
          # Natürliche Sätze
          - "[alle] lichter <room_prep> {area} auf (voll|maximum|100)"
          - "alles licht <room_prep> {area} [auf voll|an]"
          # Voll aufdrehen
          - "(dreh|drehe) [das] [licht] <room_prep> {area} voll auf"
          - "[licht] <room_prep> {area} voll aufdrehen"
        slots:
          area:
            type: area

  # --------------------------------------------------------------------------
  # MINIMALE HELLIGKEIT (Custom Intent) - Gedimmtes Licht
  # --------------------------------------------------------------------------
  LightMinArea:
    data:
      - sentences:
          # Standard: "Minimale Helligkeit im Büro"
          - "(minimale|minimaler|niedrige|niedrigste) helligkeit <room_prep> {area}"
          - "(gedimmtes|schwaches|dunkles) licht <room_prep> {area}"
          # Am Ende
          - "<room_prep> {area} (minimale|minimaler|niedrige) helligkeit"
          - "<room_prep> {area} (gedimmtes|schwaches) licht"
          # Mit mach/stell
          - "(mach|mache|stell|stelle) [das] [licht] <room_prep> {area} auf (minimum|minimal|niedrig|1|1 prozent)"
          - "(mach|mache|stell|stelle) [das] [licht] <room_prep> {area} ganz (dunkel|gedimmt)"
          # Dimmen
          - "(dimm|dimme) [das] [licht] <room_prep> {area} [auf minimum|ganz runter]"
          - "<room_prep> {area} [licht] dimmen"
          # Area am Anfang
          - "{area} [licht] [auf] (minimale|niedrige) helligkeit"
          - "{area} [licht] [auf] (minimum|1 prozent)"
        slots:
          area:
            type: area

  # --------------------------------------------------------------------------
  # LICHT STATUS
  # --------------------------------------------------------------------------
  GetLightState:
    data:
      - sentences:
          - "(wie|was) (ist|sind) <article> {name} [(licht|lampe)]"
          - "(ist|sind) <article> {name} (an|aus|ein)"
          - "(status|helligkeit) [von|vom] {name}"
          - "{name} (status|helligkeit)"
          - "auf wieviel [prozent] (ist|steht) <article> {name}"
        slots:
          name:
            type: entity
            domain: light
        response: >
          {% set state = states(slots.name) %}
          {% set brightness = state_attr(slots.name, 'brightness') | default(0) %}
          {% set pct = (brightness / 2.55) | round %}
          {% set fname = state_attr(slots.name, 'friendly_name') %}
          {% if state == 'on' %}
          {% set on_responses = [
            fname ~ " ist an bei " ~ pct ~ "%.",
            fname ~ " leuchtet gerade mit " ~ pct ~ "% Helligkeit.",
            fname ~ " ist eingeschaltet auf " ~ pct ~ "%."
          ] %}
          {{ on_responses | random }}
          {% else %}
          {% set off_responses = [
            fname ~ " ist aus.",
            fname ~ " ist ausgeschaltet.",
            fname ~ " leuchtet gerade nicht."
          ] %}
          {{ off_responses | random }}
          {% endif %}

  # --------------------------------------------------------------------------
  # LICHT HELLER/DUNKLER (Custom Intent fuer Entity)
  # --------------------------------------------------------------------------
  LightBrighterEntity:
    data:
      - sentences:
          - "{name} heller [machen]"
          - "[das|die|den] {name} heller [machen]"
          - "(mach|mache|macht|machst) [das|die|den] {name} heller"
          - "(mach|mache|macht|machst) heller [das|die|den] {name}"
          - "{name} [licht] heller [machen]"
          - "(mach|mache|macht|machst) [das] {name} [licht] heller"
          - "(dimm|dimme) [das|die|den] {name} (hoch|auf)"
          - "mehr licht [bei|am|von] {name}"
          - "(kannst|könntest|würdest) du [das|die|den] {name} heller (machen|stellen)"
        slots:
          name:
            type: entity
            domain: light

  # --------------------------------------------------------------------------
  # LICHT DUNKLER (Custom Intent fuer Entity)
  # --------------------------------------------------------------------------
  LightDarkerEntity:
    data:
      - sentences:
          - "{name} dunkler [machen]"
          - "[das|die|den] {name} dunkler [machen]"
          - "(mach|mache|macht|machst) [das|die|den] {name} dunkler"
          - "(mach|mache|macht|machst) dunkler [das|die|den] {name}"
          - "{name} [licht] dunkler [machen]"
          - "(mach|mache|macht|machst) [das] {name} [licht] dunkler"
          - "(dimm|dimme) [das|die|den] {name} [(runter|dunkler|ab)]"
          - "weniger licht [bei|am|von] {name}"
          - "(kannst|könntest|würdest) du [das|die|den] {name} dunkler (machen|stellen)"
        slots:
          name:
            type: entity
            domain: light

  # --------------------------------------------------------------------------
  # LICHT MAXIMUM (Custom Intent fuer Entity)
  # --------------------------------------------------------------------------
  LightMaxEntity:
    data:
      - sentences:
          - "{name} [auf] (maximum|voll|100|100 prozent)"
          - "[das|die|den] {name} [auf] (maximum|voll|100 prozent)"
          - "(mach|mache|stell|stelle) [das|die|den] {name} [auf] (maximum|voll|100 prozent)"
          - "(mach|mache) [das|die|den] {name} ganz hell"
          - "(dreh|drehe) [das|die|den] {name} voll auf"
          - "{name} voll aufdrehen"
        slots:
          name:
            type: entity
            domain: light

  # --------------------------------------------------------------------------
  # LICHT MINIMUM (Custom Intent fuer Entity)
  # --------------------------------------------------------------------------
  LightMinEntity:
    data:
      - sentences:
          - "{name} [auf] (minimum|minimal|1 prozent)"
          - "[das|die|den] {name} [auf] (minimum|minimal)"
          - "(mach|mache|stell|stelle) [das|die|den] {name} [auf] (minimum|minimal|1 prozent)"
          - "(mach|mache) [das|die|den] {name} ganz dunkel"
          - "(dimm|dimme) [das|die|den] {name} ganz runter"
        slots:
          name:
            type: entity
            domain: light
