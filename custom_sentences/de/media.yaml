# ================================================================================
# HA-GERMAN-VOICE - Deutsche Medien-Sprachbefehle
# ================================================================================
# TRUE STATE OF THE ART - Home Assistant 2024+ Syntax
# ✅ Entity Slots mit type: entity + domain filtering
# ✅ Area Slots mit type: area
# ✅ Responses direkt in Sentences
# ================================================================================

language: de

# ============================================================================
# EXPANSION RULES
# ============================================================================
expansion_rules:
  article: "[der|die|das|den|dem]"
  polite: "[bitte|mal|doch|eben]"
  device_prep: "(auf|am|über|mit)"

# ============================================================================
# LISTEN
# ============================================================================
lists:
  volume:
    values:
      - in: "(0|null|stumm)"
        out: 0
      - in: "(10|zehn)"
        out: 10
      - in: "(20|zwanzig)"
        out: 20
      - in: "(25|fünfundzwanzig|viertel)"
        out: 25
      - in: "(30|dreißig)"
        out: 30
      - in: "(40|vierzig)"
        out: 40
      - in: "(50|fünfzig|halb|halbe)"
        out: 50
      - in: "(60|sechzig)"
        out: 60
      - in: "(70|siebzig)"
        out: 70
      - in: "(75|fünfundsiebzig|dreiviertel)"
        out: 75
      - in: "(80|achtzig)"
        out: 80
      - in: "(90|neunzig)"
        out: 90
      - in: "(100|hundert|voll|maximum)"
        out: 100

  media_content_type:
    values:
      - in: "(musik|music|lieder|songs)"
        out: "music"
      - in: "(radio|sender)"
        out: "radio"
      - in: "(podcast|podcasts)"
        out: "podcast"
      - in: "(video|videos|film|filme)"
        out: "video"
      - in: "(playlist|playlists|wiedergabeliste)"
        out: "playlist"
      - in: "(hörbuch|hoerbuch|audiobook|audiobooks|hörbücher)"
        out: "audiobook"
      - in: "(nachrichten|news)"
        out: "news"

# ============================================================================
# INTENTS MIT ENTITY/AREA SLOTS + RESPONSES
# ============================================================================
intents:
  # --------------------------------------------------------------------------
  # ABSPIELEN / PLAY
  # --------------------------------------------------------------------------
  HassMediaUnpause:
    data:
      - sentences:
          - "(spiel|starte|play|abspielen) <polite> <device_prep> {name}"
          - "(spiel|starte|play) [die] (musik|wiedergabe) <device_prep> {name}"
          - "(media|medium|wiedergabe) (abspielen|starten) <device_prep> {name}"
          - "{name} (abspielen|starten|play)"
          - "(weiter|fortsetzen|resume) <device_prep> {name}"
          - "[spiel] weiter <device_prep> {name}"
          - "(musik|wiedergabe) (fortsetzen|weiter) <device_prep> {name}"
        slots:
          name:
            type: entity
            domain: media_player
        response: "OK, Wiedergabe gestartet auf {{ slots.name }}."

  # --------------------------------------------------------------------------
  # PAUSE
  # --------------------------------------------------------------------------
  HassMediaPause:
    data:
      - sentences:
          - "(pause|pausieren|stopp|stop|anhalten|halt) <polite> <device_prep> {name}"
          - "(musik|wiedergabe) (pause|pausieren|stoppen|anhalten) <device_prep> {name}"
          - "{name} (pause|pausieren|stoppen|anhalten)"
          - "mach <polite> [eine] pause <device_prep> {name}"
        slots:
          name:
            type: entity
            domain: media_player
        response: "OK, {{ slots.name }} pausiert."

  # --------------------------------------------------------------------------
  # NÄCHSTER TITEL
  # --------------------------------------------------------------------------
  HassMediaNext:
    data:
      - sentences:
          - "(nächster|naechster|weiter|skip|überspringen|ueberspringen) [(lied|titel|song|track)] <device_prep> {name}"
          - "skip <device_prep> {name}"
          - "(lied|titel|song|track) (überspringen|skippen) <device_prep> {name}"
          - "{name} (skip|weiter|nächster|naechster)"
          - "spiel <article> (nächsten|naechsten) [(lied|titel|song)] <device_prep> {name}"
        slots:
          name:
            type: entity
            domain: media_player
        response: "OK, nächster Titel."

  # --------------------------------------------------------------------------
  # VORHERIGER TITEL
  # --------------------------------------------------------------------------
  HassMediaPrevious:
    data:
      - sentences:
          - "(vorheriger|zurück|zurueck|letzter) [(lied|titel|song|track)] <device_prep> {name}"
          - "(lied|titel|song|track) (zurück|zurueck) <device_prep> {name}"
          - "{name} (zurück|zurueck|vorheriger)"
          - "spiel <article> (vorherigen|letzten) [(lied|titel|song)] <device_prep> {name}"
          - "nochmal <device_prep> {name}"
        slots:
          name:
            type: entity
            domain: media_player
        response: "OK, vorheriger Titel."

  # --------------------------------------------------------------------------
  # LAUTSTÄRKE SETZEN
  # --------------------------------------------------------------------------
  HassSetVolume:
    data:
      # === Direkte Lautstärke ===
      - sentences:
          - "(setz|stell) <polite> [die] lautstärke <device_prep> {name} auf {volume} [prozent]"
          - "lautstärke <device_prep> {name} [auf] {volume} [prozent]"
          - "{name} [lautstärke] [auf] {volume} [prozent]"
          - "(volume|lautstärke) {volume} <device_prep> {name}"
        slots:
          name:
            type: entity
            domain: media_player
        response: "OK, Lautstärke auf {{ slots.volume }}%."
      
      # === Lauter/Leiser ===
      - sentences:
          - "(lauter|mehr|höher|hoeher) <device_prep> {name}"
          - "(leiser|weniger|runter|runterstellen) <device_prep> {name}"
          - "{name} (lauter|leiser)"
          - "mach <polite> <article> {name} (lauter|leiser)"
        slots:
          name:
            type: entity
            domain: media_player
        response: "OK, Lautstärke angepasst."

  # --------------------------------------------------------------------------
  # STUMM
  # --------------------------------------------------------------------------
  HassMediaMute:
    data:
      - sentences:
          - "(stumm|stummschalten|mute) <device_prep> {name}"
          - "{name} (stumm|mute|stummschalten)"
          - "ton (aus|ab) <device_prep> {name}"
          - "(ruhe|still|leise) <device_prep> {name}"
        slots:
          name:
            type: entity
            domain: media_player
        response: "OK, {{ slots.name }} stumm."

  # --------------------------------------------------------------------------
  # STUMM AUS
  # --------------------------------------------------------------------------
  HassMediaUnmute:
    data:
      - sentences:
          - "(stumm aus|unmute|ton an|laut) <device_prep> {name}"
          - "{name} (ton an|unmute|laut)"
          - "ton (an|ein) <device_prep> {name}"
        slots:
          name:
            type: entity
            domain: media_player
        response: "OK, Ton wieder an."

  # --------------------------------------------------------------------------
  # STOPP (Wiedergabe beenden)
  # --------------------------------------------------------------------------
  HassMediaStop:
    data:
      - sentences:
          - "(stopp|stop|beenden|aufhören|aufhoeren|abbrechen) <polite> [die] (musik|wiedergabe|abspielen) <device_prep> {name}"
          - "(musik|wiedergabe) (stoppen|beenden|aufhören) <device_prep> {name}"
          - "{name} (stoppen|beenden|aus)"
          - "hör auf [zu spielen] <device_prep> {name}"
        slots:
          name:
            type: entity
            domain: media_player
        response: "OK, Wiedergabe beendet."

  # --------------------------------------------------------------------------
  # SHUFFLE AN/AUS
  # --------------------------------------------------------------------------
  HassMediaShuffle:
    data:
      - sentences:
          - "(shuffle|zufallswiedergabe|mischen|zufall) (an|ein|aktivieren) <device_prep> {name}"
          - "(shuffle|zufallswiedergabe) (aus|ab|deaktivieren) <device_prep> {name}"
          - "{name} (shuffle|mischen) (an|aus)"
          - "(spiel|wiedergabe) <device_prep> {name} (zufällig|gemischt)"
        slots:
          name:
            type: entity
            domain: media_player
        response: "OK, Shuffle aktiviert."

  # --------------------------------------------------------------------------
  # REPEAT AN/AUS
  # --------------------------------------------------------------------------
  HassMediaRepeat:
    data:
      - sentences:
          - "(repeat|wiederholen|wiederholung|schleife) (an|ein|aktivieren) <device_prep> {name}"
          - "(repeat|wiederholen|wiederholung|schleife) (aus|ab|deaktivieren) <device_prep> {name}"
          - "{name} (repeat|wiederholen) (an|aus)"
          - "[auf] (endlosschleife|dauerschleife) <device_prep> {name}"
        slots:
          name:
            type: entity
            domain: media_player
        response: "OK, Wiederholung aktiviert."

  # --------------------------------------------------------------------------
  # STATUS / WAS SPIELT
  # --------------------------------------------------------------------------
  GetMediaState:
    data:
      - sentences:
          - "(was|welches lied|welcher song|welcher titel) (spielt|läuft) [gerade] <device_prep> {name}"
          - "(was ist|wie heißt|wie heisst) <article> [(lied|song|titel|track)] <device_prep> {name}"
          - "{name} was (spielt|läuft)"
          - "(aktueller|aktuelle) [(lied|song|titel)] <device_prep> {name}"
          - "(wer|welche band|welcher künstler) (spielt|ist das) <device_prep> {name}"
        slots:
          name:
            type: entity
            domain: media_player
        response: >
          {% set title = state_attr(slots.name, 'media_title') %}
          {% set artist = state_attr(slots.name, 'media_artist') %}
          {% if title and artist %}
          Aktuell: {{ artist }} - {{ title }}.
          {% elif title %}
          Aktuell: {{ title }}.
          {% else %}
          Keine Wiedergabe aktiv.
          {% endif %}
