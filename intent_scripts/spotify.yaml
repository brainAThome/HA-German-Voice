SpotifyPlay:
  action:
  - &id001
    service: input_boolean.turn_off
    target:
      entity_id: input_boolean.spotify_ducking_active
  - &id002
    service: media_player.media_stop
    target:
      entity_id: media_player.vaca_362812d56_mediaplayer
    continue_on_error: true
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_query
    data:
      value: '{{ query }}'
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_type
    data:
      value: track
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_device
    data:
      value: ''
  - service: shell_command.spotify_voice
  speech:
    text: "{% set responses = [\n  \"Kommt sofort.\",\n  \"Geht klar.\",\n  \"Wird\
      \ gesucht.\",\n  \"Alles klar, Moment.\"\n] %} {{ responses | random }}\n"
SpotifyPlayArtist:
  action:
  - *id001
  - *id002
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_query
    data:
      value: '{{ query }}'
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_type
    data:
      value: artist
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_device
    data:
      value: ''
  - service: shell_command.spotify_voice
  speech:
    text: "{% set responses = [\n  \"Musik kommt.\",\n  \"Geht klar.\",\n  \"Wird\
      \ gestartet.\",\n  \"Alles klar.\"\n] %} {{ responses | random }}\n"
SpotifyPlayPlaylist:
  action:
  - *id001
  - *id002
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_query
    data:
      value: '{{ query }}'
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_type
    data:
      value: playlist
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_device
    data:
      value: ''
  - service: shell_command.spotify_voice
  speech:
    text: "{% set responses = [\n  \"Playlist kommt.\",\n  \"Geht klar.\",\n  \"Wird\
      \ gestartet.\",\n  \"Alles klar.\"\n] %} {{ responses | random }}\n"
SpotifyPlayAlbum:
  action:
  - *id001
  - *id002
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_query
    data:
      value: '{{ query }}'
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_type
    data:
      value: album
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_device
    data:
      value: ''
  - service: shell_command.spotify_voice
  speech:
    text: "{% set responses = [\n  \"Album kommt.\",\n  \"Geht klar.\",\n  \"Wird\
      \ gestartet.\",\n  \"Alles klar.\"\n] %} {{ responses | random }}\n"
SpotifyPlayOn:
  action:
  - *id001
  - *id002
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_query
    data:
      value: '{{ query }}'
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_type
    data:
      value: track
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_device
    data:
      value: '{{ spotify_device }}'
  - service: shell_command.spotify_voice
  speech:
    text: "{% set responses = [\n  \"Kommt sofort.\",\n  \"Geht klar.\",\n  \"Wird\
      \ gestartet.\",\n  \"Alles klar.\"\n] %} {{ responses | random }}\n"
SpotifyDevice:
  action:
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_query
    data:
      value: ''
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_type
    data:
      value: ''
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_device
    data:
      value: '{{ spotify_device }}'
  - service: shell_command.spotify_device_transfer
  speech:
    text: "{% set responses = [\n  \"Wird ├ö├Â┬ú├ö├▓├ÿbertragen.\",\n  \"Geht klar.\",\n\
      \  \"Alles klar.\",\n  \"OK, Moment.\"\n] %} {{ responses | random }}\n"
SpotifyPause:
  action:
  - *id001
  - service: media_player.media_pause
    target:
      entity_id: media_player.spotify_sven
    continue_on_error: true
  - service: shell_command.spotify_close
    continue_on_error: true
  - service: view_assist.navigate
    data:
      device: sensor.quasselbuechse
      path: /view-assist/clock
  speech:
    text: ''
SpotifyResume:
  action:
  - *id002
  - service: media_player.select_source
    target:
      entity_id: media_player.spotify_sven
    data:
      source: Echo Show 5 (2nd Generation)
    continue_on_error: true
  - delay:
      seconds: 1
  - service: media_player.media_play
    target:
      entity_id: media_player.spotify_sven
    continue_on_error: true
  - service: view_assist.navigate
    data:
      device: sensor.quasselbuechse
      path: /view-assist/music
      revert_timeout: 3600
  speech:
    text: ''
SpotifyNext:
  action:
  - service: media_player.media_next_track
    target:
      entity_id: media_player.spotify_sven
    continue_on_error: true
  speech:
    text: ''
SpotifyPrevious:
  action:
  - service: media_player.media_previous_track
    target:
      entity_id: media_player.spotify_sven
    continue_on_error: true
  speech:
    text: ''
SpotifyShuffle:
  action:
  - service: media_player.shuffle_set
    target:
      entity_id: media_player.spotify_sven
    data:
      shuffle: '{{ shuffle_state == ''true'' }}'
  speech:
    text: "{% if shuffle_state == 'true' %}\n  {% set responses = [\n    \"OK, Shuffle\
      \ ist an.\",\n    \"Zufallswiedergabe aktiviert.\",\n    \"Spotify spielt jetzt\
      \ zuf├ñllig.\"\n  ] %}\n{% else %}\n  {% set responses = [\n    \"OK, Shuffle\
      \ ist aus.\",\n    \"Zufallswiedergabe deaktiviert.\",\n    \"Spotify spielt\
      \ wieder der Reihe nach.\"\n  ] %}\n{% endif %} {{ responses | random }}\n"
SpotifyNowPlaying:
  speech:
    text: "{% set title = state_attr('media_player.spotify_sven', 'media_title') %}\
      \ {% set artist = state_attr('media_player.spotify_sven', 'media_artist') %}\
      \ {% set album = state_attr('media_player.spotify_sven', 'media_album_name')\
      \ %} {% set source = state_attr('media_player.spotify_sven', 'source') %} {%\
      \ if title and artist %}\n  {% set responses = [\n    \"Auf Spotify l├ñuft gerade:\
      \ \" ~ artist ~ \" mit \" ~ title ~ \".\",\n    \"Aktuell spielt: \" ~ artist\
      \ ~ \" - \" ~ title ~ \".\",\n    \"Gerade h├Ârst du: \" ~ title ~ \" von \"\
      \ ~ artist ~ \".\"\n  ] %}\n  {% if album %}\n    {{ responses | random }} Vom\
      \ Album {{ album }}.\n  {% else %}\n    {{ responses | random }}\n  {% endif\
      \ %}\n  {% if source %} Wiedergabe auf {{ source }}.{% endif %}\n{% elif title\
      \ %}\n  Auf Spotify l├ñuft gerade: {{ title }}.\n{% else %}\n  Spotify spielt\
      \ gerade nichts.\n{% endif %}\n"
GeneralStop:
  action:
  - *id001
  - service: media_player.media_pause
    target:
      entity_id: media_player.spotify_sven
    continue_on_error: true
  - service: media_player.media_stop
    target:
      entity_id: media_player.vaca_362812d56_mediaplayer
    continue_on_error: true
  - service: shell_command.spotify_close
    continue_on_error: true
  - service: view_assist.navigate
    data:
      device: sensor.quasselbuechse
      path: /view-assist/clock
  speech:
    text: ''
