SpotifyPlay:
  action:
  - &id001
    service: input_boolean.turn_off
    target:
      entity_id: input_boolean.spotify_ducking_active
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_query
    data:
      value: '{{ query }}'
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_type
    data:
      value: track
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_device
    data:
      value: ''
  - service: shell_command.spotify_voice
  speech:
    text: "{% set responses = [\n  \"OK, ich suche \" ~ query ~ \" auf Spotify.\"\
      ,\n  \"Alles klar, \" ~ query ~ \" kommt gleich.\",\n  \"Verstanden, suche \"\
      \ ~ query ~ \" auf Spotify.\",\n  \"Moment, ich suche \" ~ query ~ \".\",\n\
      \  \"Geht klar, \" ~ query ~ \" wird gesucht.\"\n] %} {{ responses | random\
      \ }}\n"
SpotifyPlayArtist:
  action:
  - *id001
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_query
    data:
      value: '{{ query }}'
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_type
    data:
      value: artist
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_device
    data:
      value: ''
  - service: shell_command.spotify_voice
  speech:
    text: "{% set responses = [\n  \"OK, ich spiele Musik von \" ~ query ~ \".\",\n\
      \  \"Alles klar, \" ~ query ~ \" kommt gleich.\",\n  \"Verstanden, suche \"\
      \ ~ query ~ \" auf Spotify.\",\n  \"Moment, ich suche \" ~ query ~ \" auf Spotify.\"\
      \n] %} {{ responses | random }}\n"
SpotifyPlayPlaylist:
  action:
  - *id001
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_query
    data:
      value: '{{ query }}'
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_type
    data:
      value: playlist
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_device
    data:
      value: ''
  - service: shell_command.spotify_voice
  speech:
    text: "{% set responses = [\n  \"OK, ich starte die Playlist \" ~ query ~ \".\"\
      ,\n  \"Alles klar, Playlist \" ~ query ~ \" wird gesucht.\",\n  \"Verstanden,\
      \ suche Playlist \" ~ query ~ \" auf Spotify.\"\n] %} {{ responses | random\
      \ }}\n"
SpotifyPlayAlbum:
  action:
  - *id001
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_query
    data:
      value: '{{ query }}'
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_type
    data:
      value: album
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_device
    data:
      value: ''
  - service: shell_command.spotify_voice
  speech:
    text: "{% set responses = [\n  \"OK, ich spiele das Album \" ~ query ~ \".\",\n\
      \  \"Alles klar, Album \" ~ query ~ \" wird gesucht.\",\n  \"Verstanden, suche\
      \ Album \" ~ query ~ \" auf Spotify.\"\n] %} {{ responses | random }}\n"
SpotifyPlayOn:
  action:
  - *id001
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_query
    data:
      value: '{{ query }}'
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_type
    data:
      value: track
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_device
    data:
      value: '{{ spotify_device }}'
  - service: shell_command.spotify_voice
  speech:
    text: "{% set responses = [\n  \"OK, ich spiele \" ~ query ~ \" auf \" ~ spotify_device\
      \ ~ \".\",\n  \"Alles klar, suche \" ~ query ~ \" f├╝r \" ~ spotify_device ~\
      \ \".\",\n  \"Verstanden, \" ~ query ~ \" kommt auf \" ~ spotify_device ~ \"\
      .\"\n] %} {{ responses | random }}\n"
SpotifyDevice:
  action:
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_query
    data:
      value: ''
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_type
    data:
      value: ''
  - service: input_text.set_value
    target:
      entity_id: input_text.spotify_device
    data:
      value: '{{ spotify_device }}'
  - service: shell_command.spotify_device_transfer
  speech:
    text: "{% set responses = [\n  \"OK, Spotify spielt jetzt auf \" ~ spotify_device\
      \ ~ \".\",\n  \"Alles klar, Wiedergabe wird auf \" ~ spotify_device ~ \" ├╝bertragen.\"\
      ,\n  \"Verstanden, Spotify wechselt zu \" ~ spotify_device ~ \".\"\n] %} {{\
      \ responses | random }}\n"
SpotifyPause:
  action:
  - *id001
  - service: media_player.media_pause
    target:
      entity_id: media_player.spotify_sven
    continue_on_error: true
  - service: view_assist.navigate
    data:
      device: sensor.quasselbuechse
      path: /view-assist/clock
  speech:
    text: "{% set responses = [\n  \"OK, Spotify pausiert.\",\n  \"Alles klar, Pause.\"\
      ,\n  \"Spotify ist pausiert.\",\n  \"Wiedergabe angehalten.\"\n] %} {{ responses\
      \ | random }}\n"
SpotifyResume:
  action:
  - service: media_player.media_play
    target:
      entity_id: media_player.spotify_sven
    continue_on_error: true
  - service: view_assist.navigate
    data:
      device: sensor.quasselbuechse
      path: /view-assist/music
      revert_timeout: 3600
  speech:
    text: >
      {% if is_state('media_player.spotify_sven', 'paused') or is_state('media_player.spotify_sven', 'playing') %}
        {% set responses = [
          "OK, Spotify spielt weiter.",
          "Alles klar, weiter geht's.",
          "Wiedergabe fortgesetzt.",
          "Spotify läuft wieder."
        ] %} {{ responses | random }}
      {% else %}
        Spotify hat gerade keine aktive Wiedergabe. Sag zum Beispiel: spiele Musik.
      {% endif %}
SpotifyNext:
  action:
  - service: media_player.media_next_track
    target:
      entity_id: media_player.spotify_sven
    continue_on_error: true
  speech:
    text: "{% set responses = [\n  \"OK, n├ñchster Titel.\",\n  \"Alles klar, ├╝bersprungen.\"\
      ,\n  \"N├ñchstes Lied kommt.\",\n  \"Skip!\"\n] %} {{ responses | random }}\n"
SpotifyPrevious:
  action:
  - service: media_player.media_previous_track
    target:
      entity_id: media_player.spotify_sven
    continue_on_error: true
  speech:
    text: "{% set responses = [\n  \"OK, vorheriger Titel.\",\n  \"Alles klar, zur├╝ck.\"\
      ,\n  \"Letztes Lied wird gespielt.\"\n] %} {{ responses | random }}\n"
SpotifyShuffle:
  action:
  - service: media_player.shuffle_set
    target:
      entity_id: media_player.spotify_sven
    data:
      shuffle: '{{ shuffle_state == ''true'' }}'
  speech:
    text: "{% if shuffle_state == 'true' %}\n  {% set responses = [\n    \"OK, Shuffle\
      \ ist an.\",\n    \"Zufallswiedergabe aktiviert.\",\n    \"Spotify spielt jetzt\
      \ zuf├ñllig.\"\n  ] %}\n{% else %}\n  {% set responses = [\n    \"OK, Shuffle\
      \ ist aus.\",\n    \"Zufallswiedergabe deaktiviert.\",\n    \"Spotify spielt\
      \ wieder der Reihe nach.\"\n  ] %}\n{% endif %} {{ responses | random }}\n"
SpotifyNowPlaying:
  speech:
    text: "{% set title = state_attr('media_player.spotify_sven', 'media_title') %}\
      \ {% set artist = state_attr('media_player.spotify_sven', 'media_artist') %}\
      \ {% set album = state_attr('media_player.spotify_sven', 'media_album_name')\
      \ %} {% set source = state_attr('media_player.spotify_sven', 'source') %} {%\
      \ if title and artist %}\n  {% set responses = [\n    \"Auf Spotify l├ñuft gerade:\
      \ \" ~ artist ~ \" mit \" ~ title ~ \".\",\n    \"Aktuell spielt: \" ~ artist\
      \ ~ \" - \" ~ title ~ \".\",\n    \"Gerade h├Ârst du: \" ~ title ~ \" von \"\
      \ ~ artist ~ \".\"\n  ] %}\n  {% if album %}\n    {{ responses | random }} Vom\
      \ Album {{ album }}.\n  {% else %}\n    {{ responses | random }}\n  {% endif\
      \ %}\n  {% if source %} Wiedergabe auf {{ source }}.{% endif %}\n{% elif title\
      \ %}\n  Auf Spotify l├ñuft gerade: {{ title }}.\n{% else %}\n  Spotify spielt\
      \ gerade nichts.\n{% endif %}\n"
GeneralStop:
  action:
  - *id001
  - service: media_player.media_pause
    target:
      entity_id: media_player.spotify_sven
    continue_on_error: true
  - service: media_player.media_stop
    target:
      entity_id: media_player.vaca_362812d56_mediaplayer
    continue_on_error: true
  - service: view_assist.navigate
    data:
      device: sensor.quasselbuechse
      path: /view-assist/clock
  speech:
    text: "{% set responses = [\n  \"Alles gestoppt.\",\n  \"OK, Ruhe.\",\n  \"Wiedergabe\
      \ beendet.\",\n  \"Ist aus.\",\n  \"Erledigt, alles still.\"\n] %} {{ responses\
      \ | random }}\n"
